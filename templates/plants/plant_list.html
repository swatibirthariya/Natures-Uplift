{% extends "base.html" %}
{% block title %}Plants{% endblock %}
{% block content %}

{% if selected_category %}
  <h2>Plants</h2>
  <div class="grid">
  {% for p in plants %}
<div class="card">
    <a href="javascript:void(0);" onclick="openImageModal('{{ p.image.url }}')">
      {% if p.image %}
        <img src="{{ p.image.url }}" alt="{{ p.name }}">
      {% else %}
        <img src="/static/images/ai_placeholder.jpg" alt="{{ p.name }}">
      {% endif %}
    </a>
      <h3>{{ p.name }}</h3>
      <p>{{ p.description }}</p>
      <p><strong>Size:</strong> {{ p.size }}</p>
      <p><strong>Price:</strong> â‚¹{{ p.price }}</p>
      <p><a class="btn" href="{% url 'add_to_cart' p.pk %}">Add to cart</a></p>
      {% empty %}
        <p>No plants found for this category.</p>
    </div>
  {% endfor %}
  </div>

<div id="imageModal" class="image-modal" onclick="closeImageModal()">
    <img id="modalImage">
</div>

<script>
function openImageModal(src) {
    const modal = document.getElementById("imageModal");
    const img = document.getElementById("modalImage");
    img.src = src;
    modal.style.display = "flex";  // show modal
}

function closeImageModal() {
    document.getElementById("imageModal").style.display = "none";
}
</script>
{% endif %}

{% endblock %}
